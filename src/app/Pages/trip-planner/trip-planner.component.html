
<form class="trip-planner-container" [formGroup]="tripPlannerForm" (submit)="onSubmit()">
    <h1>Plan Your Next Trip</h1>
    <div class="select-container">
        <p>From:</p>
        <select class="form-select" aria-label="Default select example" formControlName="from" name="from">
            <option value="1">İstanbul</option>
            <option value="2">Ankara</option>
            <option value="3">Eskişehir</option>
        </select>
        <p>To:</p>
        <select class="form-select" aria-label="Default select example" formControlName="to" name="to">
            <option value="1">İzmir/Çeşme</option>
        </select>
    </div>
    <div>
        <div>
            <p>Select Dates:</p>
            <div class="row row-cols-sm-auto">
                <div class="col-12">
                    <div class="dp-hidden position-absolute">
                        <div class="input-group">
                            <input
                                name="datepicker"
                                class="form-control"
                                ngbDatepicker
                                #datepicker="ngbDatepicker"
                                [autoClose]="'outside'"
                                (dateSelect)="onDateSelection($event)"
                                [displayMonths]="2"
                                [dayTemplate]="t"
                                outsideDays="hidden"
                                [startDate]="fromDate!"
                                tabindex="-1"
                            />
                            <ng-template #t let-date let-focused="focused">
                                <span
                                    class="custom-day"
                                    [class.focused]="focused"
                                    [class.range]="isRange(date)"
                                    [class.faded]="isHovered(date) || isInside(date)"
                                    (mouseenter)="hoveredDate = date"
                                    (mouseleave)="hoveredDate = null"
                                >
                                    {{ date.day }}
                                </span>
                            </ng-template>
                        </div>
                    </div>
                    <div class="input-group">
                        <input
                            #dpFromDate
                            class="form-control"
                            placeholder="yyyy-mm-dd"
                            name="dpFromDate"
                            [value]="formatter.format(fromDate)"
                            (input)="fromDate = validateInput(fromDate, dpFromDate.value)"
                        />
                        <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                    </div>
                </div>
                <div class="col-12">
                    <div class="input-group">
                        <input
                            #dpToDate
                            class="form-control"
                            placeholder="yyyy-mm-dd"
                            name="dpToDate"
                            [value]="formatter.format(toDate)"
                            (input)="toDate = validateInput(toDate, dpToDate.value)"
                        />
                        <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div class="row">
            <p>Select the Kind of Activities You Want To Do:</p>
            <div class="col-md-4" *ngFor="let category of categories;">
                <div class="card" [ngClass]="{'selected': category.selected}" (click)="toggleSelection(category)" formArrayName="activities">
                    <div class="card-body">
                        <img class="card-img" [src]="category.imageUrl" alt="{{ category.name }}"/>
                        {{ category.name }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="exampleInputEmail1">How Many People are Going:</label>
        <input type="number" class="form-control" id="exampleInputEmail1" placeholder="Enter email" formControlName="numPeople">
    </div>
    <div class="button-container">
        <button routerLink="/landing">Back</button>
        <button type="submit">Create Trip</button>
    </div>
</form>
